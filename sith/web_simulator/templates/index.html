<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SITH - R2-D2 Web Simulator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ¤– SITH - R2-D2 Web Simulator</h1>
            <p>Shadow Integration & Translation Hub - Browser Simulation</p>
        </header>

        <div class="main-content">
            <!-- R2-D2 Dome Visualization -->
            <div class="dome-section">
                <h2>ðŸŽ­ R2-D2 Dome</h2>
                <div class="dome-container">
                    <div class="dome" id="dome">
                        <!-- Panels will be generated by JavaScript -->
                    </div>
                    <div class="dome-info">
                        <div class="status-indicator" id="domeStatus">
                            <span class="status-dot"></span>
                            <span>Dome Ready</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Control Panel -->
            <div class="control-section">
                <h2>ðŸŽ® Control Panel</h2>
                
                <!-- Shadow Commands -->
                <div class="command-panel">
                    <h3>Shadow Commands</h3>
                    <div class="command-input">
                        <input type="text" id="commandInput" placeholder="Enter Shadow command (e.g., :OP01)" 
                               value=":OP01">
                        <button id="sendCommand">Send</button>
                    </div>
                    
                    <div class="quick-commands">
                        <h4>Quick Commands:</h4>
                        <div class="command-buttons">
                            <button class="cmd-btn" data-cmd=":OP01">Open Panel 1</button>
                            <button class="cmd-btn" data-cmd=":CL01">Close Panel 1</button>
                            <button class="cmd-btn" data-cmd=":OP00">Open All</button>
                            <button class="cmd-btn" data-cmd=":CL00">Close All</button>
                            <button class="cmd-btn" data-cmd=":SE02">Wave Sequence</button>
                            <button class="cmd-btn" data-cmd="*H005">HP Flash</button>
                            <button class="cmd-btn" data-cmd="@0T5">Scream Display</button>
                            <button class="cmd-btn" data-cmd="$S">Scream Sound</button>
                        </div>
                    </div>
                </div>

                <!-- Sequence Control -->
                <div class="sequence-panel">
                    <h3>Sequence Control</h3>
                    <div class="sequence-controls">
                        <button id="loadWaveSequence">Load Wave Sequence</button>
                        <button id="loadScreamSequence">Load Scream Sequence</button>
                        <button id="startSequence" disabled>Start Sequence</button>
                        <button id="pauseSequence" disabled>Pause</button>
                        <button id="resumeSequence" disabled>Resume</button>
                        <button id="stopSequence" disabled>Stop</button>
                    </div>
                    
                    <div class="sequence-status">
                        <div class="status-item">
                            <span>Status:</span>
                            <span id="sequenceStatus">Stopped</span>
                        </div>
                        <div class="status-item">
                            <span>Progress:</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <span id="progressText">0%</span>
                        </div>
                        <div class="status-item">
                            <span>Step:</span>
                            <span id="currentStep">0 / 0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Command Log -->
            <div class="log-section">
                <h2>ðŸ“‹ Command Log</h2>
                <div class="log-container">
                    <div class="log-controls">
                        <button id="clearLog">Clear Log</button>
                        <button id="refreshLog">Refresh</button>
                    </div>
                    <div class="log-content" id="commandLog">
                        <div class="log-entry">Ready to receive commands...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <span class="status-dot" id="connectionStatus"></span>
                <span id="connectionText">Connecting...</span>
            </div>
            <div class="status-item">
                <span>Commands:</span>
                <span id="commandCount">0</span>
            </div>
            <div class="status-item">
                <span>Time:</span>
                <span id="currentTime"></span>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/simulator.js') }}"></script>
</body>
</html>